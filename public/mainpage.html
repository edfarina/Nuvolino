<html ng-app="NuvolaWeb"> 
  <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

        <title>MM PCB QC</title>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css"><!-- load bootstrap -->
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">



      <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
              <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-cookies.js"></script>

     <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
         <script src="/js/controllers/main.js"></script> <!-- load up our controller --> 
   
     <script src="/js/services/services.js"></script> <!-- load our services -->
        <script src="/js/coreStat.js"></script>  <!-- load our main application --> 
<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.1.2.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-chart/0.1.0/ng-google-chart.min.js" type="text/javascript"></script>

	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.js"></script>
<script src="https://cdn.jsdelivr.net/angular.chartjs/latest/angular-chart.min.js"></script>
-->

</head>   
 <style>
         .datepickerdemo md-content {
            padding-bottom: 200px; 
         }
        .datepickerdemo .validation-messages {
            font-size: 11px;
            color: darkred;
            margin: 10px 0 0 25px; 
         }
      </style>
   <body > 

<!-- <%= user.username %> -->

<!--<script>
  var name = <%- JSON.stringify(user.username) %>;
  console.log(user.username );
</script> -->


  
<div ng-controller="dateController" ng-show = "login('<%= user.username  %>')" class="container">
    <div  class="container">
        <img class="img-responsive pull-right" ng-src="/logo_nuvolino.png" width="300"  />
        <div class="jumbotron text-center">
            <div class="row">
                    <h1>Nuvolino Main Page</h1>

            </div>
            <div class="clearfix"></div>
        </div>


        
        <div id="entries-form" class="row">
           <label for="" ><small> you are logged in as {{username}} </small></label>
           
           
           <div class="panel panel-info" ng-show="LastData" >
               <div class="panel-heading">Last Data</div>
               <div class="panel-body">
                  
                <div  ng-switch on="LastData.Available" >
                <div ng-switch-when="true">
                   <div class="row">
                    <!-- <div class="col-sm-3">
                     Seconds: <span class="label label-default">{{LastData.Seconds}}</span>
                    </div> -->
                    <div class="col-sm-4">
                     Energy: <span class="label label-default">{{LastData.Energy}}</span>
                    </div>
                    <div class="col-sm-4">
                     Potenza corrente: <span class="label label-default">{{LastData.Pinst}}</span>
                    </div>
                    <div class="col-sm-4">
                     Stato di carica: <span class="label label-default">{{LastData.StateOfCharge}}</span>
                    </div>
                  </div>
                   <div class="row">
                    <!-- <div class="col-sm-3">
                     ConnStatus: <span class="label label-default">{{LastData.ConnStatus}}</span>
                    </div> -->
                    <div class="col-sm-4">
                     Potenza fase 1: <span class="label label-default">{{LastData.GridPower1}}</span>
                    </div>
                    <div class="col-sm-4">
                     Potenza fase 2: <span class="label label-default">{{LastData.GridPower2}}</span>
                    </div>
                    <div class="col-sm-4">
                     Potenza fase 3: <span class="label label-default">{{LastData.GridPower3}}</span>
                    </div>
                  </div>
                   <div class="row">
                    <!-- <div class="col-sm-3">
                     State: <span class="label label-default">{{LastData.State}}</span>
                    </div> -->
                    <div class="col-sm-4">
                     Allarmi batteria: <span class="label label-default">{{LastData.BatteryAlarm}}</span>
                    </div>
                    <div class="col-sm-4">
                     Voltaggio Batteria: <span class="label label-default">{{LastData.BatteryVoltage}}</span>
                    </div>
                    <div class="col-sm-4">
                     Corrente Batteria: <span class="label label-default">{{LastData.BatteryCurrent}}</span>
                    </div>
                  </div>
                   <div class="row">
                    <div class="col-sm-4">
                     Connessione al CCGX: <span class="label label-default">{{LastData.ConnCCGX}}</span>
                    </div>
                    <div class="col-sm-4">
                     Data: <span class="label label-default">{{LastData.Date_}}</span>
                    </div>
                  </div>
                  <br></br>
                  <div class="well well-lg">
                  
                   <div class="row">
                   	<div class="col-sm-12 table-responsive">

                    <div class="col-sm-4">
                       <div google-chart chart="myChartObjectPInst" style="height:130px; width:100%;"></div>
                    </div>
                    <div class="col-sm-4">
                       <div google-chart chart="myChartObjectBattery" style="height:130px; width:100%;"></div>
                    </div>
                    <div class="col-sm-4">
                        <div class="row">
                           <div  ng-switch on="LastData.StateSystem" >
                              <div ng-switch-when="Recharging">
                                 <h1> <span class="label label-info">Recharging</span></h1>
                              </div>
                              <div ng-switch-when="Discharging">
                                 <h1> <span class="label label-primary">Discharging</span></h1>
                              </div>
                              <div ng-switch-when="Standby">
                                 <h1> <span class="label label-default">Standby</span></h1>
                              </div>
                           </div>
                           <div class="row">
                                 <h1> <span class="label label-success">Money saved: {{euros}} euro!</span></h1>
                                 
                              </div>
                       </div>
                       </div>
                       
                       
                       </div>
                    </div>
                  
                  </div>
                  
                  
                  
                  
                   
               </div>
                <div ng-switch-when="false">
                   <label for="" ><small> No Data Available </small></label>
                   
               </div>
               </div>   
                  
               </div>
               </div>
           </div>
           
            <div class="panel panel-info" >
                <div class="panel-heading">Select Period</div>

                <div class="panel-body">
		    <div class="col-md-6 text-center">

                        <div class="datepickerdemo"  layout="column" ng-cloak>
            <h4>Date from</h4>
            <md-datepicker 
               ng-model="myDateFrom" 
               md-placeholder="Enter date"></md-datepicker>
      <label for="" ng-show="datefrom_selected"><small> {{myDateFrom}} </small></label>
                       </div>
		   </div>	
		    <div class="col-md-6 text-center">
                       <div class="datepickerdemo"  layout="column" ng-cloak>
            <h4>Date to</h4>
            <md-datepicker 
               ng-model="myDateTo" 
               md-placeholder="Enter date"></md-datepicker>
      <label for="" ng-show="dateto_selected"><small> {{myDateTo}} </small></label>
		      </div>
		   </div>
	<div class="col-md-12 text-center">
	<select ng-model="selectedPredefinedTimeWindow" ng-options="x.name for x in PredefinedTimeWindow">
</select>
   <!-- <select ng-model="selectedBoardType" ng-options="x.name for x in BoardType">
</select>
   <select ng-model="temporaryOrdefinitive" ng-options="x.name for x in TempDef">
</select>  -->
   <!-- </div> -->
               </div>
           </div>
	<div class "panel-footer" >
	    <div class="pull-right">
	      <button type="button" class="btn btn-secondary btn-sm pull-right" ng-click="Search()" id="search" >Search</button>
	    </div> 
	    <p class="text-center" ng-show="checking_spin">
	    <span class="fa fa-spinner fa-spin fa-2x"></span>
	    </p>
	</div>
        </div>
    </div>





<!--<div ng-controller="dateController" layout="column" ng-cloak>
<div google-chart chart="myChartObject" style="height:600px; width:100%;"></div>
ciao
</div>  
-->
            <div class="panel panel-info" ng-show="SearchPerformed">
                <div class="panel-heading">Results</div>
                <div class="panel-body">
             		<div class="row">
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendPInst" style="height:600px; width:100%;"></div>
		              </div>
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendGridPower1" style="height:600px; width:90%;"></div>
		              </div>
                    <!-- <div class="col-md-6 text-center">
                       <div google-chart chart="myChartTrendEnergy" style="height:600px; width:90%;"></div>
                    </div> -->
		           </div>
                 
                   <!-- <div class="row">
                    <div class="col-md-6 text-center">
                       <div google-chart chart="myChartTrendSeconds" style="height:600px; width:100%;"></div>
                    </div>
                    <div class="col-md-6 text-center">
                       <div google-chart chart="myChartTrendStateOfCharge" style="height:600px; width:90%;"></div>
                    </div>
                 </div> -->
                 

                 
             		<div class="row">
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendGridPower2" style="height:600px; width:100%;"></div>
		              </div>
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendGridPower3" style="height:600px; width:90%;"></div>
		              </div>
		           </div>
                 
                   <!-- <div class="row"> -->
                   <!--  <div class="col-md-6 text-center">
                       <div google-chart chart="myChartTrendConnStatus" style="height:600px; width:100%;"></div>
                    </div> -->

                 <!-- </div> -->
                 
             		<div class="row">
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendState" style="height:600px; width:100%;"></div>
		              </div>
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendBatteryAlarm" style="height:600px; width:90%;"></div>
		              </div>
		           </div>
                 
             		<div class="row">
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendBatteryVoltage" style="height:600px; width:100%;"></div>
		              </div>
                    <div class="col-md-6 text-center">
			              <div google-chart chart="myChartTrendBatteryCurrent" style="height:600px; width:90%;"></div>
		              </div>
		           </div>
                 
                   <!-- <div class="row">
                    <div class="col-md-6 text-center">
                       <div google-chart chart="myChartTrendConnCCGX" style="height:600px; width:100%;"></div>
                    </div> -->
                 
                 <!-- </div> -->
                 

                 
               </div>

</div>
 </body>
</html>
